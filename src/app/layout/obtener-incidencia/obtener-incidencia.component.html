<div [@routerTransition]>
    <app-page-header [heading]="'Lista de Incidencias en Citas de los Paciente'" [icon]="'fa-edit'"></app-page-header>

    <div class="row" *ngIf="show">
        <div class="col">
            <div class="card mb-3">
                <div class="card-header">
                    Incidencias en Citas de los Paciente
                </div>
                <div class="card-body table-responsive">
                    <table datatable [dtOptions]="dtOptions" class="table table-striped table-bordered row-border hover" class="table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Fecha de Incidencia</th>
                                <th>Descripción</th>
                                <th>Tipo</th>
                                <th>Fecha de Creación</th>
                                <th>Medico</th>
                                <th>Citas Afectadas</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let incidencia of incidencias">
                                <th scope="row">{{incidencia.id}}</th>
                                <td>{{incidencia.fecha}}</td>
                                <td>{{incidencia.descripcion}}</td>
                                <td>{{incidencia.tipo}}</td>
                                <td>{{incidencia.created_at.split('T')[0]}}</td>
                                <td>Dr. {{incidencia.citas[0]?.medico?.apellidos}}</td>
                                <td>{{incidencia.citas.length}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
